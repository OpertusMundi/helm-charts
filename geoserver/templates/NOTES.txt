{{- $fullname := (include "geoserver.fullname" .) -}}
{{- $serviceDomain := (include "geoserver.serviceDomain" .) -}}
{{- $geoserverHost := printf "%s-0.%s" $fullname $serviceDomain -}}


{{- if .Values.curl.create -}}

## Invoke a method from REST API (examples)

See also: https://docs.geoserver.org/stable/en/user/rest/

Define some helper variables:

    geoserver_url=http://{{ $geoserverHost }}:8080/geoserver

Get info on workspaces:

    kubectl exec -i deploy/{{ $fullname }}-cli -- curl --fail --netrc-file /netrc ${geoserver_url}/rest/workspaces.json

Create a workspace `test1`:

    echo '<workspace><name>test1</name></workspace>' | 
       kubectl exec -i deploy/{{ $fullname }}-cli -- curl --fail --netrc-file /netrc -XPOST ${geoserver_url}/rest/workspaces -H 'content-type: application/xml' -d @-

{{- end }}{{/*if*/}}

